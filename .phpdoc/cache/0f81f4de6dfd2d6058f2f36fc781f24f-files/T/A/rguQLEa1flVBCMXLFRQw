1749751333
0f81f4de6dfd2d6058f2f36fc781f24f-phpdoc%3Aa832da09d42abcf05ff92b913e3eccd8-77dd9552db7f36247fae9ca16b80ddf9
s:10348:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lIjtzOjMxOiJSZXNldFBhc3N3b3JkQ29udHJvbGxlci50cGwucGhwIjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWVzcGFjZXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6Ijc3ZGQ5NTUyZGI3ZjM2MjQ3ZmFlOWNhMTZiODBkZGY5IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHBhdGgiO3M6ODM6InZlbmRvci9zeW1mb255L21ha2VyLWJ1bmRsZS90ZW1wbGF0ZXMvcmVzZXRQYXNzd29yZC9SZXNldFBhc3N3b3JkQ29udHJvbGxlci50cGwucGhwIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czo2Nzc4OiI8Pz0gIjw/cGhwXG4iID8+CgpuYW1lc3BhY2UgPD89ICRuYW1lc3BhY2UgPz47Cgo8Pz0gJHVzZV9zdGF0ZW1lbnRzOyA/PgoKI1tSb3V0ZSgnL3Jlc2V0LXBhc3N3b3JkJyldCmNsYXNzIDw/PSAkY2xhc3NfbmFtZSA/PiBleHRlbmRzIEFic3RyYWN0Q29udHJvbGxlcgp7CiAgICB1c2UgUmVzZXRQYXNzd29yZENvbnRyb2xsZXJUcmFpdDsKCiAgICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoCiAgICAgICAgcHJpdmF0ZSBSZXNldFBhc3N3b3JkSGVscGVySW50ZXJmYWNlICRyZXNldFBhc3N3b3JkSGVscGVyLAogICAgICAgIHByaXZhdGUgRW50aXR5TWFuYWdlckludGVyZmFjZSAkZW50aXR5TWFuYWdlcgogICAgKSB7CiAgICB9CgogICAgLyoqCiAgICAgKiBEaXNwbGF5ICYgcHJvY2VzcyBmb3JtIHRvIHJlcXVlc3QgYSBwYXNzd29yZCByZXNldC4KICAgICAqLwogICAgI1tSb3V0ZSgnJywgbmFtZTogJ2FwcF9mb3Jnb3RfcGFzc3dvcmRfcmVxdWVzdCcpXQogICAgcHVibGljIGZ1bmN0aW9uIHJlcXVlc3QoUmVxdWVzdCAkcmVxdWVzdCwgTWFpbGVySW50ZXJmYWNlICRtYWlsZXI8P3BocCBpZiAoJHRyYW5zbGF0b3JfYXZhaWxhYmxlKTogPz4sIFRyYW5zbGF0b3JJbnRlcmZhY2UgJHRyYW5zbGF0b3I8P3BocCBlbmRpZiA/Pik6IFJlc3BvbnNlCiAgICB7CiAgICAgICAgJGZvcm0gPSAkdGhpcy0+Y3JlYXRlRm9ybSg8Pz0gJHJlcXVlc3RfZm9ybV90eXBlX2NsYXNzX25hbWUgPz46OmNsYXNzKTsKICAgICAgICAkZm9ybS0+aGFuZGxlUmVxdWVzdCgkcmVxdWVzdCk7CgogICAgICAgIGlmICgkZm9ybS0+aXNTdWJtaXR0ZWQoKSAmJiAkZm9ybS0+aXNWYWxpZCgpKSB7CiAgICAgICAgICAgIC8qKiBAdmFyIHN0cmluZyAkZW1haWwgKi8KICAgICAgICAgICAgJGVtYWlsID0gJGZvcm0tPmdldCgnPD89ICRlbWFpbF9maWVsZCA/PicpLT5nZXREYXRhKCk7CgogICAgICAgICAgICByZXR1cm4gJHRoaXMtPnByb2Nlc3NTZW5kaW5nUGFzc3dvcmRSZXNldEVtYWlsKCRlbWFpbCwgJG1haWxlcjw/cGhwIGlmICgkdHJhbnNsYXRvcl9hdmFpbGFibGUpOiA/PiwgJHRyYW5zbGF0b3I8P3BocCBlbmRpZiA/Pjw/PSAiXG4iID8+KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkdGhpcy0+cmVuZGVyKCdyZXNldF9wYXNzd29yZC9yZXF1ZXN0Lmh0bWwudHdpZycsIFsKICAgICAgICAgICAgJ3JlcXVlc3RGb3JtJyA9PiAkZm9ybSwKICAgICAgICBdKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbmZpcm1hdGlvbiBwYWdlIGFmdGVyIGEgdXNlciBoYXMgcmVxdWVzdGVkIGEgcGFzc3dvcmQgcmVzZXQuCiAgICAgKi8KICAgICNbUm91dGUoJy9jaGVjay1lbWFpbCcsIG5hbWU6ICdhcHBfY2hlY2tfZW1haWwnKV0KICAgIHB1YmxpYyBmdW5jdGlvbiBjaGVja0VtYWlsKCk6IFJlc3BvbnNlCiAgICB7CiAgICAgICAgLy8gR2VuZXJhdGUgYSBmYWtlIHRva2VuIGlmIHRoZSB1c2VyIGRvZXMgbm90IGV4aXN0IG9yIHNvbWVvbmUgaGl0IHRoaXMgcGFnZSBkaXJlY3RseS4KICAgICAgICAvLyBUaGlzIHByZXZlbnRzIGV4cG9zaW5nIHdoZXRoZXIgb3Igbm90IGEgdXNlciB3YXMgZm91bmQgd2l0aCB0aGUgZ2l2ZW4gZW1haWwgYWRkcmVzcyBvciBub3QKICAgICAgICBpZiAobnVsbCA9PT0gKCRyZXNldFRva2VuID0gJHRoaXMtPmdldFRva2VuT2JqZWN0RnJvbVNlc3Npb24oKSkpIHsKICAgICAgICAgICAgJHJlc2V0VG9rZW4gPSAkdGhpcy0+cmVzZXRQYXNzd29yZEhlbHBlci0+Z2VuZXJhdGVGYWtlUmVzZXRUb2tlbigpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICR0aGlzLT5yZW5kZXIoJ3Jlc2V0X3Bhc3N3b3JkL2NoZWNrX2VtYWlsLmh0bWwudHdpZycsIFsKICAgICAgICAgICAgJ3Jlc2V0VG9rZW4nID0+ICRyZXNldFRva2VuLAogICAgICAgIF0pOwogICAgfQoKICAgIC8qKgogICAgICogVmFsaWRhdGVzIGFuZCBwcm9jZXNzIHRoZSByZXNldCBVUkwgdGhhdCB0aGUgdXNlciBjbGlja2VkIGluIHRoZWlyIGVtYWlsLgogICAgICovCiAgICAjW1JvdXRlKCcvcmVzZXQve3Rva2VufScsIG5hbWU6ICdhcHBfcmVzZXRfcGFzc3dvcmQnKV0KICAgIHB1YmxpYyBmdW5jdGlvbiByZXNldChSZXF1ZXN0ICRyZXF1ZXN0LCBVc2VyUGFzc3dvcmRIYXNoZXJJbnRlcmZhY2UgJHBhc3N3b3JkSGFzaGVyPD9waHAgaWYgKCR0cmFuc2xhdG9yX2F2YWlsYWJsZSk6ID8+LCBUcmFuc2xhdG9ySW50ZXJmYWNlICR0cmFuc2xhdG9yPD9waHAgZW5kaWYgPz4sIHN0cmluZyAkdG9rZW4gPSBudWxsKTogUmVzcG9uc2UKICAgIHsKICAgICAgICBpZiAoJHRva2VuKSB7CiAgICAgICAgICAgIC8vIFdlIHN0b3JlIHRoZSB0b2tlbiBpbiBzZXNzaW9uIGFuZCByZW1vdmUgaXQgZnJvbSB0aGUgVVJMLCB0byBhdm9pZCB0aGUgVVJMIGJlaW5nCiAgICAgICAgICAgIC8vIGxvYWRlZCBpbiBhIGJyb3dzZXIgYW5kIHBvdGVudGlhbGx5IGxlYWtpbmcgdGhlIHRva2VuIHRvIDNyZCBwYXJ0eSBKYXZhU2NyaXB0LgogICAgICAgICAgICAkdGhpcy0+c3RvcmVUb2tlbkluU2Vzc2lvbigkdG9rZW4pOwoKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdFRvUm91dGUoJ2FwcF9yZXNldF9wYXNzd29yZCcpOwogICAgICAgIH0KCiAgICAgICAgJHRva2VuID0gJHRoaXMtPmdldFRva2VuRnJvbVNlc3Npb24oKTsKICAgICAgICBpZiAobnVsbCA9PT0gJHRva2VuKSB7CiAgICAgICAgICAgIHRocm93ICR0aGlzLT5jcmVhdGVOb3RGb3VuZEV4Y2VwdGlvbignTm8gcmVzZXQgcGFzc3dvcmQgdG9rZW4gZm91bmQgaW4gdGhlIFVSTCBvciBpbiB0aGUgc2Vzc2lvbi4nKTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8qKiBAdmFyIDw/PSAkdXNlcl9jbGFzc19uYW1lID8+ICR1c2VyICovCiAgICAgICAgICAgICR1c2VyID0gJHRoaXMtPnJlc2V0UGFzc3dvcmRIZWxwZXItPnZhbGlkYXRlVG9rZW5BbmRGZXRjaFVzZXIoJHRva2VuKTsKICAgICAgICB9IGNhdGNoIChSZXNldFBhc3N3b3JkRXhjZXB0aW9uSW50ZXJmYWNlICRlKSB7CiAgICAgICAgICAgICR0aGlzLT5hZGRGbGFzaCgncmVzZXRfcGFzc3dvcmRfZXJyb3InLCBzcHJpbnRmKAogICAgICAgICAgICAgICAgJyVzIC0gJXMnLAogICAgICAgICAgICAgICAgPD9waHAgaWYgKCR0cmFuc2xhdG9yX2F2YWlsYWJsZSk6ID8+JHRyYW5zbGF0b3ItPnRyYW5zKDw/PSAkcHJvYmxlbV92YWxpZGF0ZV9tZXNzYWdlX29yX2NvbnN0YW50ID8+LCBbXSwgJ1Jlc2V0UGFzc3dvcmRCdW5kbGUnKTw/cGhwIGVsc2U6ID8+PD89ICRwcm9ibGVtX3ZhbGlkYXRlX21lc3NhZ2Vfb3JfY29uc3RhbnQgPz48P3BocCBlbmRpZiA/PiwKICAgICAgICAgICAgICAgIDw/cGhwIGlmICgkdHJhbnNsYXRvcl9hdmFpbGFibGUpOiA/PiR0cmFuc2xhdG9yLT50cmFucygkZS0+Z2V0UmVhc29uKCksIFtdLCAnUmVzZXRQYXNzd29yZEJ1bmRsZScpPD9waHAgZWxzZTogPz4kZS0+Z2V0UmVhc29uKCk8P3BocCBlbmRpZiA/Pjw/PSAiXG4iID8+CiAgICAgICAgICAgICkpOwoKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdFRvUm91dGUoJ2FwcF9mb3Jnb3RfcGFzc3dvcmRfcmVxdWVzdCcpOwogICAgICAgIH0KCiAgICAgICAgLy8gVGhlIHRva2VuIGlzIHZhbGlkOyBhbGxvdyB0aGUgdXNlciB0byBjaGFuZ2UgdGhlaXIgcGFzc3dvcmQuCiAgICAgICAgJGZvcm0gPSAkdGhpcy0+Y3JlYXRlRm9ybSg8Pz0gJHJlc2V0X2Zvcm1fdHlwZV9jbGFzc19uYW1lID8+OjpjbGFzcyk7CiAgICAgICAgJGZvcm0tPmhhbmRsZVJlcXVlc3QoJHJlcXVlc3QpOwoKICAgICAgICBpZiAoJGZvcm0tPmlzU3VibWl0dGVkKCkgJiYgJGZvcm0tPmlzVmFsaWQoKSkgewogICAgICAgICAgICAvLyBBIHBhc3N3b3JkIHJlc2V0IHRva2VuIHNob3VsZCBiZSB1c2VkIG9ubHkgb25jZSwgcmVtb3ZlIGl0LgogICAgICAgICAgICAkdGhpcy0+cmVzZXRQYXNzd29yZEhlbHBlci0+cmVtb3ZlUmVzZXRSZXF1ZXN0KCR0b2tlbik7CgogICAgICAgICAgICAvKiogQHZhciBzdHJpbmcgJHBsYWluUGFzc3dvcmQgKi8KICAgICAgICAgICAgJHBsYWluUGFzc3dvcmQgPSAkZm9ybS0+Z2V0KCdwbGFpblBhc3N3b3JkJyktPmdldERhdGEoKTsKCiAgICAgICAgICAgIC8vIEVuY29kZShoYXNoKSB0aGUgcGxhaW4gcGFzc3dvcmQsIGFuZCBzZXQgaXQuCiAgICAgICAgICAgICR1c2VyLT48Pz0gJHBhc3N3b3JkX3NldHRlciA/PigkcGFzc3dvcmRIYXNoZXItPmhhc2hQYXNzd29yZCgkdXNlciwgJHBsYWluUGFzc3dvcmQpKTsKICAgICAgICAgICAgJHRoaXMtPmVudGl0eU1hbmFnZXItPmZsdXNoKCk7CgogICAgICAgICAgICAvLyBUaGUgc2Vzc2lvbiBpcyBjbGVhbmVkIHVwIGFmdGVyIHRoZSBwYXNzd29yZCBoYXMgYmVlbiBjaGFuZ2VkLgogICAgICAgICAgICAkdGhpcy0+Y2xlYW5TZXNzaW9uQWZ0ZXJSZXNldCgpOwoKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdFRvUm91dGUoJzw/PSAkc3VjY2Vzc19yZWRpcmVjdF9yb3V0ZSA/PicpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICR0aGlzLT5yZW5kZXIoJ3Jlc2V0X3Bhc3N3b3JkL3Jlc2V0Lmh0bWwudHdpZycsIFsKICAgICAgICAgICAgJ3Jlc2V0Rm9ybScgPT4gJGZvcm0sCiAgICAgICAgXSk7CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBwcm9jZXNzU2VuZGluZ1Bhc3N3b3JkUmVzZXRFbWFpbChzdHJpbmcgJGVtYWlsRm9ybURhdGEsIE1haWxlckludGVyZmFjZSAkbWFpbGVyPD9waHAgaWYgKCR0cmFuc2xhdG9yX2F2YWlsYWJsZSk6ID8+LCBUcmFuc2xhdG9ySW50ZXJmYWNlICR0cmFuc2xhdG9yPD9waHAgZW5kaWYgPz4pOiBSZWRpcmVjdFJlc3BvbnNlCiAgICB7CiAgICAgICAgJHVzZXIgPSAkdGhpcy0+ZW50aXR5TWFuYWdlci0+Z2V0UmVwb3NpdG9yeSg8Pz0gJHVzZXJfY2xhc3NfbmFtZSA/Pjo6Y2xhc3MpLT5maW5kT25lQnkoWwogICAgICAgICAgICAnPD89ICRlbWFpbF9maWVsZCA/PicgPT4gJGVtYWlsRm9ybURhdGEsCiAgICAgICAgXSk7CgogICAgICAgIC8vIERvIG5vdCByZXZlYWwgd2hldGhlciBhIHVzZXIgYWNjb3VudCB3YXMgZm91bmQgb3Igbm90LgogICAgICAgIGlmICghJHVzZXIpIHsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdFRvUm91dGUoJ2FwcF9jaGVja19lbWFpbCcpOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHJlc2V0VG9rZW4gPSAkdGhpcy0+cmVzZXRQYXNzd29yZEhlbHBlci0+Z2VuZXJhdGVSZXNldFRva2VuKCR1c2VyKTsKICAgICAgICB9IGNhdGNoIChSZXNldFBhc3N3b3JkRXhjZXB0aW9uSW50ZXJmYWNlICRlKSB7CiAgICAgICAgICAgIC8vIElmIHlvdSB3YW50IHRvIHRlbGwgdGhlIHVzZXIgd2h5IGEgcmVzZXQgZW1haWwgd2FzIG5vdCBzZW50LCB1bmNvbW1lbnQKICAgICAgICAgICAgLy8gdGhlIGxpbmVzIGJlbG93IGFuZCBjaGFuZ2UgdGhlIHJlZGlyZWN0IHRvICdhcHBfZm9yZ290X3Bhc3N3b3JkX3JlcXVlc3QnLgogICAgICAgICAgICAvLyBDYXV0aW9uOiBUaGlzIG1heSByZXZlYWwgaWYgYSB1c2VyIGlzIHJlZ2lzdGVyZWQgb3Igbm90LgogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyAkdGhpcy0+YWRkRmxhc2goJ3Jlc2V0X3Bhc3N3b3JkX2Vycm9yJywgc3ByaW50ZigKICAgICAgICAgICAgLy8gICAgICclcyAtICVzJywKICAgICAgICAgICAgLy8gICAgIDw/cGhwIGlmICgkdHJhbnNsYXRvcl9hdmFpbGFibGUpOiA/PiR0cmFuc2xhdG9yLT50cmFucyg8Pz0gJHByb2JsZW1faGFuZGxlX21lc3NhZ2Vfb3JfY29uc3RhbnQgPz4sIFtdLCAnUmVzZXRQYXNzd29yZEJ1bmRsZScpPD9waHAgZWxzZTogPz48Pz0gJHByb2JsZW1faGFuZGxlX21lc3NhZ2Vfb3JfY29uc3RhbnQgPz48P3BocCBlbmRpZiA/PiwKICAgICAgICAgICAgLy8gICAgIDw/cGhwIGlmICgkdHJhbnNsYXRvcl9hdmFpbGFibGUpOiA/PiR0cmFuc2xhdG9yLT50cmFucygkZS0+Z2V0UmVhc29uKCksIFtdLCAnUmVzZXRQYXNzd29yZEJ1bmRsZScpPD9waHAgZWxzZTogPz4kZS0+Z2V0UmVhc29uKCk8P3BocCBlbmRpZiA/Pjw/PSAiXG4iID8+CiAgICAgICAgICAgIC8vICkpOwoKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdFRvUm91dGUoJ2FwcF9jaGVja19lbWFpbCcpOwogICAgICAgIH0KCiAgICAgICAgJGVtYWlsID0gKG5ldyBUZW1wbGF0ZWRFbWFpbCgpKQogICAgICAgICAgICAtPmZyb20obmV3IEFkZHJlc3MoJzw/PSAkZnJvbV9lbWFpbCA/PicsICc8Pz0gJGZyb21fZW1haWxfbmFtZSA/PicpKQogICAgICAgICAgICAtPnRvKChzdHJpbmcpICR1c2VyLT48Pz0gJGVtYWlsX2dldHRlciA/PigpKQogICAgICAgICAgICAtPnN1YmplY3QoJ1lvdXIgcGFzc3dvcmQgcmVzZXQgcmVxdWVzdCcpCiAgICAgICAgICAgIC0+aHRtbFRlbXBsYXRlKCdyZXNldF9wYXNzd29yZC9lbWFpbC5odG1sLnR3aWcnKQogICAgICAgICAgICAtPmNvbnRleHQoWwogICAgICAgICAgICAgICAgJ3Jlc2V0VG9rZW4nID0+ICRyZXNldFRva2VuLAogICAgICAgICAgICBdKQogICAgICAgIDsKCiAgICAgICAgJG1haWxlci0+c2VuZCgkZW1haWwpOwoKICAgICAgICAvLyBTdG9yZSB0aGUgdG9rZW4gb2JqZWN0IGluIHNlc3Npb24gZm9yIHJldHJpZXZhbCBpbiBjaGVjay1lbWFpbCByb3V0ZS4KICAgICAgICAkdGhpcy0+c2V0VG9rZW5PYmplY3RJblNlc3Npb24oJHJlc2V0VG9rZW4pOwoKICAgICAgICByZXR1cm4gJHRoaXMtPnJlZGlyZWN0VG9Sb3V0ZSgnYXBwX2NoZWNrX2VtYWlsJyk7CiAgICB9Cn0KIjtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGRvY0Jsb2NrIjtOO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAbWV0YWRhdGEiO2E6MDp7fX0=";